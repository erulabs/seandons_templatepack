global
    daemon
    maxconn 256

defaults
    mode tcp
    timeout connect 5000ms
    timeout client 5000ms
    timeout server 5000ms

# TODO: Example HA proxy configurations

# Rails example
# frontend redis
#     bind 0.0.0.0:<%= node['ha-redis']['haproxy_port'] %>
#     default_backend redis
#
# backend redis
#     mode tcp
#     balance first
#     option tcp-check
#
#     tcp-check send info\ replication\r\n
#     tcp-check expect string role:master
#
# <% @app_nodes.each do |addr| %>
#     server redis:<%= addr %>:<%= node['ha-redis']['redis_port'] %> <%= addr %>:<%= node['ha-redis']['redis_port'] %> maxconn 1024 check inter 1s
# <% end %>
